//
//  DataSource.m
//  DogApp
//
//  Created by Matt Maher on 4/16/15.
//  Copyright (c) 2015 Matt Maher. All rights reserved.
//

#import "DataSource.h"
#import <Parse/Parse.h>

@interface DataSource ()

@end

@implementation DataSource

+ (instancetype) sharedInstance {
    static dispatch_once_t once;
    static id sharedInstance;
    dispatch_once(&once, ^{
        sharedInstance = [[self alloc] init];
    });
    return sharedInstance;
}

- (BOOL)emailNotificationAllowed:(BOOL)yesOrNo {
    return yesOrNo;
}

- (PFQuery *)queryForTable:(NSString *)className {
    PFQuery *query = [PFQuery queryWithClassName:className];
    
    [query orderByDescending:@"createdAt"];
    
    return query;
}

-(BOOL)filterForProfanity:(NSString *)text {
    
    NSArray *listOfProfaneWords = @[@"ballsack", @"bastard", @"blowjob", @"blow job",	@"boner", @"buttplug", @"clitoris", @"cock", @"cunt", @"damn", @"dick", @"dildo", @"dyke", @"fag", @"fellatio", @"felch", @"fuck", @"f u c k", @"fudgepacker", @"fudge packer", @"Goddamn", @"God damn", @"homo", @"jizz", @"labia", @"muff", @"nigger", @"nigga", @"penis", @"pussy",	@"queer", @"scrotum", @"sex", @"shit", @"slut", @"smegma", @"twat", @"vagina", @"whore", @"vdog"];
    
    NSArray *testText = [NSArray arrayWithObject:text];
    
    for (NSInteger i = 0; i <= [listOfProfaneWords count] - 1; i++) {
        NSPredicate *predicate = [NSPredicate predicateWithFormat:@"SELF contains[c] %@", listOfProfaneWords[i]];
        NSArray *results = [testText filteredArrayUsingPredicate:predicate];
        NSLog(@"%@", results);
        
        if ([results count] != 0) {
            
            return YES;
        }
    }
    
    return NO;
}

- (NSString *)rulesString {
    NSString *theRules = @"Rules\n\nThe goal of Vitalidog is to provide a fun, friendly, and informative place for users. We will keep our eyes on posts, and we greatly appreciate it when users report rule violations that we have not yet found.\n\nFailure to follow the rules will result in, but is not limited to, loss of account privileges.\n\nIn order for Vitalidog to stay live, there are some limitations as to what can be published. These limitations comply with legal requirements and improve the Vitalidog experience. We reserve the right to chance the rules without notice, so please check here for the most current version.\n\nPlease interpret the rules conservatively. There is no way to standardize a definition for offensive, so it is best to be nice.\n\nProfanity is prohibited.\n\nMaterial of an offensive nature is prohibited. This includes potentially offensive subject matters\n\nInappropriate or offensive user images are prohibited.\n\nImpersonation is prohibited.\n\nTrademarked usernames and images may be reclaimed by their legal owners.\n\nThe publication of other people’s private information is prohibited.\n\nSpecific threats of violence are prohibited.\n\nCases of copyright infringement will be handled as-per the Terms of Service.\n\nVitalidog may not be used to commit illegal activities.\n\nCreating multiple accounts to commit abusive behavior is prohibited.\n\nAbuse and harassment are prohibited.\n\nInactive usernames will be deleted after six months of inactivity.\n\nMalware, phishing, and spam are prohibited.\n\nWe may revise these Rules from time to time.\n\nContact us to report a violation or with questions through the contact form.\n\n* Vitalidog merely describes things that work for us. We do not suggest for anybody to try any activity, product, etc. We also do not suggest that anybody will enjoy the same results from any activity, product, etc. as us. Again, Vitalidog is about neat ideas that have worked for us. Please be sure to agree to our EULA and Terms of Use before using Vitalidog.";
    
    return theRules;
}

- (NSString *)eulaString {
    NSString *theEula = @"LICENSED APPLICATION END USER LICENSE AGREEMENT and TERMS OF USE\n\nThe Products transacted through the Service are licensed, not sold, to You for use only under the terms of this license, unless a Product is accompanied by a separate license agreement, in which case the terms of that separate license agreement will govern, subject to Your prior acceptance of that separate license agreement. The licensor (Application Provider) reserves all rights not expressly granted to You. The Product that is subject to this license is referred to in this license as the Licensed Application.\n\na. Scope of License: This license granted to You for the Licensed Application by Application Provider is limited to a non-transferable license to use the Licensed Application on any iPhone or iPod touch that You own or control and as permitted by the Usage Rules set forth in Section 9.b. of the App Store Terms and Conditions (the “Usage Rules”). This license does not allow You to use the Licensed Application on any iPod touch or iPhone that You do not own or control, and You may not distribute or make the Licensed Application available over a network where it could be used by multiple devices at the same time. You may not rent, lease, lend, sell, redistribute or sublicense the Licensed Application. You may not copy (except as expressly permitted by this license and the Usage Rules), decompile, reverse engineer, disassemble, attempt to derive the source code of, modify, or create derivative works of the Licensed Application, any updates, or any part thereof (except as and only to the extent any foregoing restriction is prohibited by applicable law or to the extent as may be permitted by the licensing terms governing use of any open sourced components included with the Licensed Application). Any attempt to do so is a violation of the rights of the Application Provider and its licensors. If You breach this restriction, You may be subject to prosecution and damages. The terms of the license will govern any upgrades provided by Application Provider that replace and/or supplement the original Product, unless such upgrade is accompanied by a separate license in which case the terms of that license will govern.\n\nb. Consent to Use of Data: You agree that Application Provider may collect and use technical data and related information, including but not limited to technical information about Your device, system and application software, and peripherals, that is gathered periodically to facilitate the provision of software updates, product support and other services to You (if any) related to the Licensed Application. Application Provider may use this information, as long as it is in a form that does not personally identify You, to improve its products or to provide services or technologies to You.\n\nc. Termination. The license is effective until terminated by You or Application Provider. Your rights under this license will terminate automatically without notice from the Application Provider if You fail to comply with any term(s) of this license. Upon termination of the license, You shall cease all use of the Licensed Application, and destroy all copies, full or partial, of the Licensed Application.\n\nd. Services; Third Party Materials. The Licensed Application may enable access to Application Provider’s and third party services and web sites (collectively and individually, Services). Use of the Services may require Internet access and that You accept additional terms of service.\n\nYou understand that by using any of the Services, You may encounter content that may be deemed offensive, indecent, or objectionable, which content may or may not be identified as having explicit language, and that the results of any search or entering of a particular URL may automatically and unintentionally generate links or references to objectionable material. Nevertheless, You agree to use the Services at Your sole risk and that the Application Provider shall not have any liability to You for content that may be found to be offensive, indecent, or objectionable.\n\nCertain Services may display, include or make available content, data, information, applications or materials from third parties (“Third Party Materials”) or provide links to certain third party web sites. By using the Services, You acknowledge and agree that the Application Provider is not responsible for examining or evaluating the content, accuracy, completeness, timeliness, validity, copyright compliance, legality, decency, quality or any other aspect of such Third Party Materials or web sites. The Application Provider does not warrant or endorse and does not assume and will not have any liability or responsibility to You or any other person for any third-party Services, Third Party Materials or web sites, or for any other materials, products, or services of third parties. Third Party Materials and links to other web sites are provided solely as a convenience to You. Financial information displayed by any Services is for general informational purposes only and is not intended to be relied upon as investment advice. Before executing any securities transaction based upon information obtained through the Services, You should consult with a financial professional. Location data provided by any Services is for basic navigational purposes only and is not intended to be relied upon in situations where precise location information is needed or where erroneous, inaccurate or incomplete location data may lead to death, personal injury, property or environmental damage. Neither the Application Provider, nor any of its content providers, guarantees the availability, accuracy, completeness, reliability, or timeliness of stock information or location data displayed by any Services.\n\nYou agree that any Services contain proprietary content, information and material that is protected by applicable intellectual property and other laws, including but not limited to copyright, and that You will not use such proprietary content, information or materials in any way whatsoever except for permitted use of the Services. No portion of the Services may be reproduced in any form or by any means. You agree not to modify, rent, lease, loan, sell, distribute, or create derivative works based on the Services, in any manner, and You shall not exploit the Services in any unauthorized way whatsoever, including but not limited to, by trespass or burdening network capacity. You further agree not to use the Services in any manner to harass, abuse, stalk, threaten, defame or otherwise infringe or violate the rights of any other party, and that the Application Provider is not in any way responsible for any such use by You, nor for any harassing, threatening, defamatory, offensive or illegal messages or transmissions that You may receive as a result of using any of the Services.\n\nIn addition, third party Services and Third Party Materials that may be accessed from, displayed on or linked to from the iPhone or iPod touch are not available in all languages or in all countries. The Application Provider makes no representation that such Services and Materials are appropriate or available for use in any particular location. To the extent You choose to access such Services or Materials, You do so at Your own initiative and are responsible for compliance with any applicable laws, including but not limited to applicable local laws. The Application Provider, and its licensors, reserve the right to change, suspend, remove, or disable access to any Services at any time without notice. In no event will the Application Provider be liable for the removal of or disabling of access to any such Services. The Application Provider may also impose limits on the use of or access to certain Services, in any case and without notice or liability.\n\ne. NO WARRANTY: YOU EXPRESSLY ACKNOWLEDGE AND AGREE THAT USE OF THE LICENSED APPLICATION IS AT YOUR SOLE RISK AND THAT THE ENTIRE RISK AS TO SATISFACTORY QUALITY, PERFORMANCE, ACCURACY AND EFFORT IS WITH YOU. TO THE MAXIMUM EXTENT PERMITTED BY APPLICABLE LAW, THE LICENSED APPLICATION AND ANY SERVICES PERFORMED OR PROVIDED BY THE LICENSED APPLICATION (SERVICES) ARE PROVIDED AS IS AND AS AVAILABLE, WITH ALL FAULTS AND WITHOUT WARRANTY OF ANY KIND, AND APPLICATION PROVIDER HEREBY DISCLAIMS ALL WARRANTIES AND CONDITIONS WITH RESPECT TO THE LICENSED APPLICATION AND ANY SERVICES, EITHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES AND/OR CONDITIONS OF MERCHANTABILITY, OF SATISFACTORY QUALITY, OF FITNESS FOR A PARTICULAR PURPOSE, OF ACCURACY, OF QUIET ENJOYMENT, AND NON-INFRINGEMENT OF THIRD PARTY RIGHTS. APPLICATION PROVIDER DOES NOT WARRANT AGAINST INTERFERENCE WITH YOUR ENJOYMENT OF THE LICENSED APPLICATION, THAT THE FUNCTIONS CONTAINED IN, OR SERVICES PERFORMED OR PROVIDED BY, THE LICENSED APPLICATION WILL MEET YOUR REQUIREMENTS, THAT THE OPERATION OF THE LICENSED APPLICATION OR SERVICES WILL BE UNINTERRUPTED OR ERROR-FREE, OR THAT DEFECTS IN THE LICENSED APPLICATION OR SERVICES WILL BE CORRECTED. NO ORAL OR WRITTEN INFORMATION OR ADVICE GIVEN BY APPLICATION PROVIDER OR ITS AUTHORIZED REPRESENTATIVE SHALL CREATE A WARRANTY. SHOULD THE LICENSED APPLICATION OR SERVICES PROVE DEFECTIVE, YOU ASSUME THE ENTIRE COST OF ALL NECESSARY SERVICING, REPAIR OR CORRECTION. SOME JURISDICTIONS DO NOT ALLOW THE EXCLUSION OF IMPLIED WARRANTIES OR LIMITATIONS ON APPLICABLE STATUTORY RIGHTS OF A CONSUMER, SO THE ABOVE EXCLUSION AND LIMITATIONS MAY NOT APPLY TO YOU.\n\nf. Limitation of Liability. TO THE EXTENT NOT PROHIBITED BY LAW, IN NO EVENT SHALL APPLICATION PROVIDER BE LIABLE FOR PERSONAL INJURY, OR ANY INCIDENTAL, SPECIAL, INDIRECT OR CONSEQUENTIAL DAMAGES WHATSOEVER, INCLUDING, WITHOUT LIMITATION, DAMAGES FOR LOSS OF PROFITS, LOSS OF DATA, BUSINESS INTERRUPTION OR ANY OTHER COMMERCIAL DAMAGES OR LOSSES, ARISING OUT OF OR RELATED TO YOUR USE OR INABILITY TO USE THE LICENSED APPLICATION, HOWEVER CAUSED, REGARDLESS OF THE THEORY OF LIABILITY (CONTRACT, TORT OR OTHERWISE) AND EVEN IF APPLICATION PROVIDER HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES. SOME JURISDICTIONS DO NOT ALLOW THE LIMITATION OF LIABILITY FOR PERSONAL INJURY, OR OF INCIDENTAL OR CONSEQUENTIAL DAMAGES, SO THIS LIMITATION MAY NOT APPLY TO YOU. In no event shall Application Provider’s total liability to you for all damages (other than as may be required by applicable law in cases involving personal injury) exceed the amount of fifty dollars ($50.00). The foregoing limitations will apply even if the above stated remedy fails of its essential purpose.\n\ng. You may not use or otherwise export or re-export the Licensed Application except as authorized by United States law and the laws of the jurisdiction in which the Licensed Application was obtained. In particular, but without limitation, the Licensed Application may not be exported or re-exported (a) into any U.S. embargoed countries or (b) to anyone on the U.S. Treasury Department's list of Specially Designated Nationals or the U.S. Department of Commerce Denied Person’s List or Entity List. By using the Licensed Application, you represent and warrant that you are not located in any such country or on any such list. You also agree that you will not use these products for any purposes prohibited by United States law, including, without limitation, the development, design, manufacture or production of nuclear, missiles, or chemical or biological weapons.\n\nh. The Licensed Application and related documentation are Commercial Items, as that term is defined at 48 C.F.R. §2.101, consisting of Commercial Computer Software and Commercial Computer Software Documentation, as such terms are used in 48 C.F.R. §12.212 or 48 C.F.R. §227.7202, as applicable. Consistent with 48 C.F.R. §12.212 or 48 C.F.R. §227.7202-1 through 227.7202-4, as applicable, the Commercial Computer Software and Commercial Computer Software Documentation are being licensed to U.S. Government end users (a) only as Commercial Items and (b) with only those rights as are granted to all other end users pursuant to the terms and conditions herein. Unpublished-rights reserved under the copyright laws of the United States.\n\ni. The laws of the State of California, excluding its conflicts of law rules, govern this license and your use of the Licensed Application. Your use of the Licensed Application may also be subject to other local, state, national, or international laws..\n\nIn no event shall our company be liable for any direct, indirect, punitive, incidental, special consequential damages, to property or life, whatsoever arising out of or connected with the use or misuse of information herein. Vitalidog is merely describes things that work for us. We, in no way, express or imply that any activity, product, or other will have a positive or negative effect on anybody or anybody’s pet.";
    
    return theEula;
    
    
}

- (NSString *)privacyString {
    NSString *thePrivacyString = @"Privacy Policy of Vitalidog\n\nThis Application collects some Personal Data from its Users.\n\nData Controller and Owner\n\nJill Maher\n\ncontact@12thtone.com\n\nTypes of Data collected\n\nAmong the types of Personal Data that this Application collects, by itself or through third parties, there are:\n\nCookie and Usage data.\n\nOther Personal Data collected may be described in other sections of this privacy policy or by dedicated explanation text contextually with the Data collection.\n\nThe Personal Data may be freely provided by the User, or collected automatically when using this Application.\n\nAny use of Cookies - or of other tracking tools - by this Application or by the owners of third party services used by this Application, unless stated otherwise, serves to identify Users and remember their preferences, for the sole purpose of providing the service required by the User.\n\nFailure to provide certain Personal Data may make it impossible for this Application to provide its services.\n\nUsers are responsible for any Personal Data of third parties obtained, published or shared through this Application and confirm that they have the third party's consent to provide the Data to the Owner.\n\nMode and place of processing the Data\n\nMethods of processing\n\nThe Data Controller processes the Data of Users in a proper manner and shall take appropriate security measures to prevent unauthorized access, disclosure, modification, or unauthorized destruction of the Data.\n\nThe Data processing is carried out using computers and/or IT enabled tools, following organizational procedures and modes strictly related to the purposes indicated. In addition to the Data Controller, in some cases, the Data may be accessible to certain types of persons in charge, involved with the operation of the site (administration, sales, marketing, legal, system administration) or external parties (such as third party technical service providers, mail carriers, hosting providers, IT companies, communications agencies) appointed, if necessary, as Data Processors by the Owner. The updated list of these parties may be requested from the Data Controller at any time.\n\nPlace\n\nThe Data is processed at the Data Controller's operating offices and in any other places where the parties involved with the processing are located. For further information, please contact the Data Controller.\n\nRetention time\n\nThe Data is kept for the time necessary to provide the service requested by the User, or stated by the purposes outlined in this document, and the User can always request that the Data Controller suspend or remove the data.\n\nThe use of the collected Data\n\nThe Data concerning the User is collected to allow the Owner to provide its services, as well as for the following purposes:\n\nAnalytics and Hosting and backend infrastructure.\n\nThe Personal Data used for each purpose is outlined in the specific sections of this document.\n\nDetailed information on the processing of Personal Data\n\nPersonal Data is collected for the following purposes and using the following services:\n\nAnalytics\n\nThe services contained in this section enable the Owner to monitor and analyze web traffic and can be used to keep track of User behavior.\n\nParse Analytics (Parse LLC.)\n\nParse Analytics is an analytics service provided by Parse LLC.\n\nPersonal Data collected:\n\nCookie and Usage data.\n\nPlace of processing: USA\n\nhttps://parse.com/about/privacy\n\nPrivacy Policy\n\nHosting and backend infrastructure\n\nThese services have the purpose of hosting data and files that enable this Application to run and be distributed as well as to provide a ready-made infrastructure to run specific features or parts of this Application.  Some of these services work through geographically distributed servers, making it difficult to determine the actual location where the Personal Data are stored.\n\nParse Core & Push (Parse LLC.)\n\nParse Core & Push is a hosting and backend service provided by Parse LLC.\n\nPersonal Data collected:\n\nVarious types of Data as specified in the privacy policy of the service.\n\nPlace of processing: USA\n\nhttps://parse.com/about/privacy\n\nPrivacy Policy\n\nAdditional information about Data collection and processing\n\nLegal action\n\nThe User's Personal Data may be used for legal purposes by the Data Controller, in Court or in the stages leading to possible legal action arising from improper use of this Application or the related services.\n\nThe User declares to be aware that the Data Controller may be required to reveal personal data upon request of public authorities.\n\nAdditional information about User's Personal Data\n\nIn addition to the information contained in this privacy policy, this Application may provide the User with additional and contextual information concerning particular services or the collection and processing of Personal Data upon request.\n\nSystem Logs and Maintenance\n\nFor operation and maintenance purposes, this Application and any third party services may collect files that record interaction with this Application (System Logs) or use for this purpose other Personal Data (such as IP Address).\n\nInformation not contained in this policy\n\nMore details concerning the collection or processing of Personal Data may be requested from the Data Controller at any time. Please see the contact information at the beginning of this document.\n\nThe rights of Users\n\nUsers have the right, at any time, to know whether their Personal Data has been stored and can consult the Data Controller to learn about their contents and origin, to verify their accuracy or to ask for them to be supplemented, cancelled, updated or corrected, or for their transformation into anonymous format or to block any data held in violation of the law, as well as to oppose their treatment for any and all legitimate reasons. Requests should be sent to the Data Controller at the contact information set out above.\n\nThis Application does not support\n\nDo Not Track requests.\n\nTo determine whether any of the third party services it uses honor the Do Not Track requests, please read their privacy policies.\n\nChanges to this privacy policy\n\nThe Data Controller reserves the right to make changes to this privacy policy at any time by giving notice to its Users on this page. It is strongly recommended to check this page often, referring to the date of the last modification listed at the bottom. If a User objects to any of the changes to the Policy, the User must cease using this Application and can request that the Data Controller removes the Personal Data. Unless stated otherwise, the then-current privacy policy applies to all Personal Data the Data Controller has about Users.\n\nInformation about this privacy policy\n\nThe Data Controller is responsible for this privacy policy, prepared starting from the modules provided by Iubenda and hosted on Iubenda's servers.\n\nDefinitions and legal references\n\nPersonal Data (or Data)\n\nAny information regarding a natural person, a legal person, an institution or an association, which is, or can be, identified, even indirectly, by reference to any other information, including a personal identification number.\n\nUsage Data\n\nInformation collected automatically from this Application (or third party services employed in this Application ), which can include: the IP addresses or domain names of the computers utilized by the Users who use this Application, the URI addresses (Uniform Resource Identifier), the time of the request, the method utilized to submit the request to the server, the size of the file received in response, the numerical code indicating the status of the server's answer (successful outcome, error, etc.), the country of origin, the features of the browser and the operating system utilized by the User, the various time details per visit (e.g., the time spent on each page within the Application) and the details about the path followed within the Application with special reference to the sequence of pages visited, and other parameters about the device operating system and/or the User's IT environment.\n\nUser\n\nThe individual using this Application, which must coincide with or be authorized by the Data Subject, to whom the Personal Data refer.\n\nData Subject\n\nThe legal or natural person to whom the Personal Data refers.\n\nData Processor (or Data Supervisor)\n\nThe natural person, legal person, public administration or any other body, association or organization authorized by the Data Controller to process the Personal Data in compliance with this privacy policy.\n\nData Controller (or Owner)\n\nThe natural person, legal person, public administration or any other body, association or organization with the right, also jointly with another Data Controller, to make decisions regarding the purposes, and the methods of processing of Personal Data and the means used, including the security measures concerning the operation and use of this Application. The Data Controller, unless otherwise specified, is the Owner of  this Application.\n\nThis Application\n\nThe hardware or software tool by which the Personal Data of the User is collected.\n\nCookie\n\nSmall piece of data stored in the User's device.\n\nLegal information\n\nNotice to European Users: this privacy statement has been prepared in fulfillment of the obligations under Art. 10 of EC Directive n. 95/46/EC, and under the provisions of Directive 2002/58/EC, as revised by Directive 2009/136/EC, on the subject of Cookies.\n\nThis privacy policy relates solely to this Application.";
    
    return thePrivacyString;
    
    
}

@end
